# Sysadmins bot

## Общее описание
Данный продукт предназначен для автоматического ответа на сообщения в 
форуме <https://sysadmins.ru/>

Реализованы следующие возможности:
 * Задание через файл конфигурации 
 списка тем в которых происходит наблюдение за темами  
 * Настраивается период опроса тем
 * Использование DeepSeek API
 * Использование локальных сетей на основе https://ollama.com/ 
 * Парсинг производится с использованием https://html-agility-pack.net/
 * Возможность запускать внешний скрипт для связи с другой системой


 ## Файлы настройки

 Для настройки приложения используются  файлы настройки appsettings.json и 
 appsettings.Debug.json
 В первом храняться общие настройки во втором ваши персональные данные типа аккаунта, пароля 
 и ключей API.
 Ниже следует описание ключей конфигурационного файла:
 * user - имя пользователя на сайте sysadmins
 * password - пароль пользователя на сайте sysadmins (сохраняйте в appsettings.Debug.json)
 * apiKey - ключ для API DeepSeek (сохраняйте в appsettings.Debug.json)
 * pollingInterval - частота опроса форума в секундах
 * module - используемый модуль: script,deepseek,localdeep (подробнее в секции модули)
 * scriptPath - путь к скрипту выполняющему запрос к сетке (подробнее в секции модули)
 * baseUrl - путь к апи DeepSeek
 * topics - опрашиваемые темы, указывайте начальную страницу и оставляйте комментарии, что бы сами понимали
 * SkipUsers - пропускаемые пользователи. Обязательно укажите того пользователя от которого работаете
 
 ## Модули

 В данный момент в системе есть 3 модуля

 * script - самый простой он запускает указанный файл указанный в параметре  **scriptPath** 
 передавая в качестве аргумента файл json, ваш файл должен отработать и заполнить поле **"answer"**
 Вот пример файла до заполнения:
 ```
 {
  "Author": "Neyron",
  "Mid": "14768324",
  "Pid": "466970",
  "Body": "\u0442\u0441\u044F \u0442\u043E?  \\n\\n\\n",
  "Date": "\u041F\u043D 17 \u0424\u0435\u0432, 2025 14:40",
  "Title": "",
  "Url": "https://sysadmins.ru/topic466970-52960.html",
  "answer": ""
}
 ```

 И после:
 ```
 {
  "Author": "Neyron",
  "Mid": "14768324",
  "Pid": "466970",
  "Body": "\u0442\u0441\u044F \u0442\u043E?  \\n\\n\\n",
  "Date": "\u041F\u043D 17 \u0424\u0435\u0432, 2025 14:40",
  "Title": "",
  "Url": "https://sysadmins.ru/topic466970-52960.html",
  "answer": "hey dude, what's up?"
}
 ```
 
 *deepseek - используется  api https://api-docs.deepseek.com/api/create-chat-completion 
 для настройки установите значения в **appsettings.Debug.json** ключа **"apiKey"**
 ну и конечно оплатите
 
 *localdeep - https://ollama.com/ запустите 1 консоль с командой
 ```
 ollama serve
 ```
 и вторую с командой
 ```
 ollama run deepseek-r1:7b
 ```


 ## Добавление новой сети

 1. Создайте класс реализующий интерфейс **IAiInterface**
 2. Реализуйте метод **Task<ForumMessage> Reply(ForumMessage question, Settings settings);**
 3. Разместите этот файл в папке Worker
 4. Добавьте в комментарий в файле appsettings.json в значении **_module_comment**
 


